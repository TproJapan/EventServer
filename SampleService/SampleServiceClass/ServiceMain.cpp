///////////////////////////////////////////////////////////////////////////////
// サービスプログラムのサンプル
///////////////////////////////////////////////////////////////////////////////
#include <stdio.h>
#include <Windows.h>
#include "CLog.h"

#include "CService.h"

using namespace std;

///////////////////////////////////////////////////////////////////////////////
// DEFINE
///////////////////////////////////////////////////////////////////////////////
const char* LOGFILE_NAME = "C:\\tmp\\SampleService2.log";
//LPWSTR SERVICE_NAME = (LPWSTR)L"SampleService2";

///////////////////////////////////////////////////////////////////////////////
// 外部変数
///////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////
// メイン処理
///////////////////////////////////////////////////////////////////////////////
int main(int argc, char* argv[])
{
	bool bRet;
	CLog logObj;

	// ログファイルを作成
	bRet = logObj.open(LOGFILE_NAME);
	logObj.log("main started");

	//CService serviceObj(logObj);
	CService serviceObj();
	CService::setLog(logObj);
	//bRet = serviceObj.run();


/*
	// サービスメイン関数をSCMに登録する
	bRet = registServiceMain();
	if (!bRet) {
		logObj.log("registServiceMain error.");
		return -1;
	}
*/

	logObj.log("main ended");

	return 0;
}

